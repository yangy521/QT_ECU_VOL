

/************************************************************************************
//
//              通讯部分  
//
************************************************************************************/

#define V_ID_CAN	0x90		//V*)	????	
#define M_ID_CAN	0x99		//M*)	????	
#define A_ID_CAN	0x58		//A*)	?????	
#define P_ID_CAN	0x60		//P*)	??????
#define I_ID_CAN	0x62		//I*)	??????
#define D_ID_CAN	0x64		//D*)	??????
#define R_ID_CAN	0x12		//R*)	??????
#define N_ID_CAN	0x14		//N*)	?????	

#define GM_ID_CAN	0x9b	//GM	??????	
#define GV_ID_CAN	0x91	//GV	??????	
#define GC_ID_CAN	0xd0	//GC	???????
#define GT_ID_CAN	0xd1	//GT	????
#define AM_ID_CAN	0x95	//AM	?????????????
#define EC_ID_CAN	0x96	//EC	???????????
#define MR_ID_CAN	0x9a	//MR	??????
#define SL_ID_CAN	0x44	//SL	????????
#define SR_ID_CAN	0x45	//SR	????????
#define PO_ID_CAN	0x98	//PO    ????	
#define GA_ID_CAN	0x59	//GA	????????
#define GP_ID_CAN	0x61	//GP	??????	
#define GI_ID_CAN	0x63	//GI	??????	
#define GD_ID_CAN	0x65	//GD	??????	
#define AP_ID_CAN	0x5a	//AP	??????
#define AI_ID_CAN	0x5c	//AI	??????
#define AD_ID_CAN	0x5e	//AD	??????
#define MP_ID_CAN	0x66	//MP	??????
#define MI_ID_CAN	0x6a	//MI	??????
#define MD_ID_CAN	0x6c	//MD	??????
#define MK_ID_CAN	0x68	//MK	??????
#define KN_ID_CAN	0x10	//KN 	??????(Kn)
#define GN_ID_CAN	0x15	//GN	??????
#define GR_ID_CAN	0x13	//GR	?????			

#define SBS_ID_CAN		0x84	//SBS*)		??????	
#define CBS_ID_CAN		0x85	//CBS*)		??????	
#define DIS_ID_CAN		0x81	//DIS*)		????	
#define ENA_ID_CAN		0x80	//ENA*)		????	
#define GVE_ID_CAN		0x92	//GVE*)		????????(?/?)	
#define GSE_ID_CAN		0x9f	//GSE*)		????????	
#define GSI_ID_CAN		0xd3	//GSI		????	
#define GEI_ID_CAN		0xd2	//GEI		??????	
#define ENC_ID_CAN		0x1e	//ENC*)		????????
#define ESA_ID_CAN		0x82	//ESA		????	
#define SMV_ID_CAN		0x18	//SMV*)		??????
#define GMV_ID_CAN	  	0x19	//GMV		??????
#define GKN_ID_CAN		0x11	//GKN*)		??????
#define SSP_ID_CAN		0x16	//SSP*)		??????
#define GSP_ID_CAN		0x17	//GSP		??????
#define SPC_ID_CAN		0x1a	//SPC*)		??????	
#define GPC_ID_CAN		0x1b	//GPC		??????	
#define SCC_ID_CAN		0x1c	//SCC*)		??????	
#define GCC_ID_CAN		0x1d	//GCC		??????	
#define STW_ID_CAN		0x37	//STW*)		????	
#define GTW_ID_CAN		0x38	//GTW*)		????	
#define SPE_ID_CAN		0x3f	//SPE*)		??(??)??????
#define GPE_ID_CAN		0x40	//GPE*)		????(??)??????
#define SPH_ID_CAN		0x33	//SPH*)		????????
#define GPH_ID_CAN		0x34	//GPH		??????	
#define SPL_ID_CAN		0x35	//SPL*)		????????
#define GPL_ID_CAN		0x36	//GPL		??????	
#define SME_ID_CAN		0x9e	//SME*)		????????(?/?)
#define GME_ID_CAN		0x9c	//GME*)		????????(?/?)	
#define SER_ID_CAN		0x39	//SER*)		??????????????
#define GER_ID_CAN		0x3a	//GER*)		??????????????	
#define GLR_ID_CAN		0x43	//GLR*)		???????????	
#define GID_ID_CAN		0x01	//GID*)		?????????
#define SPT_ID_CAN		0x3d	//SPT*)		????????
#define GPT_ID_CAN		0x3e	//GPT*)		????????	
#define GAP_ID_CAN		0x5b	//GAP*)		????????
#define GAI_ID_CAN		0x5d	//GAI*)		????????
#define GAD_ID_CAN		0x5f	//GAD*)		????????
#define GMP_ID_CAN		0x67	//GMP*)		????????
#define GMI_ID_CAN		0x6b	//GMI*)		????????
#define GMD_ID_CAN		0x6d	//GMD*)		????????
#define GMK_ID_CAN		0x69	//GMK*)		????????	
#define SVH_ID_CAN		0xa4	//SVH*)		????1
#define GVH_ID_CAN		0xa5	//GVH*)		????1
#define SVL_ID_CAN		0xa6	//SVL*)		????2
#define GVL_ID_CAN		0xa7	//GVL*)		????2	
#define SMH_ID_CAN		0xa0	//SMH*)		????1
#define GMH_ID_CAN		0xa1	//GMH*)		????1
#define SML_ID_CAN		0xa2	//SML*)		????2
#define GML_ID_CAN		0xa3	//GML*)		????2	
#define SEH_ID_CAN		0xa8	//SEH*)		????1
#define GEH_ID_CAN		0xa9	//GEH*)		????1
#define SEL_ID_CAN		0xaa	//SEL*)		????2
#define GEL_ID_CAN		0xab	//GEL*)		????2	
#define SAH_ID_CAN		0xac	//SAH*)		???????1
#define GAH_ID_CAN		0xad	//GAH*)		???????1
#define SAL_ID_CAN		0xae	//SAL*)		???????2
#define GAL_ID_CAN		0xaf	//GAL*)		???????2
#define SOV_ID_CAN		0x77	//SOV*)		??????
#define GOV_ID_CAN		0x78	//GOV*)		??????
#define SOP_ID_CAN		0x79	//SOP*)		??????
#define GOP_ID_CAN		0x7a	//GOP*)		??????
#define MPO_ID_CAN		0x7d	//MPO*)		????
#define SSK_ID_CAN		0x3b	//SSK*)		????????
#define GSK_ID_CAN		0x3c	//GSK*)		????????
#define GSV_ID_CAN		0x93	//GSV*)		??????
#define GSM_ID_CAN		0x9d	//GSM*)		??????

#define GRV_ID_CAN		0xe5	//GSM*)		??????
#define SWM_ID_CAN		0xee	//SWM*)		??????
#define SAT_ID_CAN		0xef	//SAT*)		?????????	

#define SIR_ID_CAN		0x2e	//SIR*)		??IR????
#define GIR_ID_CAN		0x2f	//GIR*)		??IR????
#define SEIR_ID_CAN		0x2c	//SEIR		????IR??
#define GEIR_ID_CAN		0x2d	//GMFV		??????IR??

#define SMOD_ID_CAN		0x2a	//SMOD		????????????
#define GMOD_ID_CAN		0x2b	//GMOD		??????	
#define GDTY_ID_CAN		0x03	//GDTY		???????
#define GVER_ID_CAN		0x02	//GVER		????????
#define BAUD_ID_CAN		0x0a	//BAUD*)	?????	
#define GENC_ID_CAN		0x1f	//GENC		????????
#define FCFG_ID_CAN		0x83	//FCFG		????	
#define SMAV_ID_CAN		0x31	//SMAV*)	????????
#define GMAV_ID_CAN		0x32	//GMAV		????????
#define SADR_ID_CAN		0x04	//SADR*)	???????
#define GADR_ID_CAN		0x05	//GADR		???????
#define SPHE_ID_CAN		0x41	//SPHE		????????
#define GPHE_ID_CAN		0x42	//GPHE		????????
#define SPOF_ID_CAN		0x75	//SPOF		????????
#define GPOF_ID_CAN		0x76	//GPOF		????????
#define SORG_ID_CAN		0x7b	//SORG		??????
#define GORG_ID_CAN		0x7c	//GORG		??????
#define SSFT_ID_CAN		0x8e	//SSFT		????????
#define GSFT_ID_CAN		0x8f	//GSFT		????????
#define CMPO_ID_CAN		0x7e	//GSFT		????????
#define SMFV_ID_CAN		0xb0	//SMFV		???????????/1000RPM
#define GMFV_ID_CAN		0xb1	//GMFV		???????????/1000RPM
#define GNOD_ID_CAN		0x06	//GNOD		???????????
#define SCBD_ID_CAN		0x07	//SCBD		??CAN?????
#define GCBD_ID_CAN		0x08	//GCBD		??CAN?????
#define GRBD_ID_CAN		0x09	//GRBD		??RS232?????
#define SNOT_ID_CAN		0x0B	//SNOT		??????
#define GNOT_ID_CAN		0x0C	//SNOT		??????

#define SVAK_ID_CAN		0xe1	//SVAK*)	????????K?
#define GVAK_ID_CAN		0xe2	//GVAK		????????K?	
#define SVAB_ID_CAN		0xe3	//SVAB*)	????????B?
#define GVAB_ID_CAN		0xe4	//GVAB		????????B?	
#define SSVB_ID_CAN		0xe6	//SSVB		????????B?
#define GSVB_ID_CAN		0xe7	//GSVB		????????B?
#define SVFB_ID_CAN		0xe8	//SVFB		????????B?
#define GVFB_ID_CAN		0xe9	//GVFB		????????B?
#define SVFK_ID_CAN		0xea	//SVFK		????????K?
#define GVFK_ID_CAN		0xeb	//GVFK		????????K?
#define SOPT_ID_CAN		0xec	//SOPT*)	??OPT
#define GOPT_ID_CAN		0xed	//GOPT		??OPT	
#define ZPQM_ID_CAN		0xf0	//ZPQM		?????????
#define SIAT_ID_CAN		0xf1	//SIAT		????????
#define GIAT_ID_CAN		0xf2	//SIAT		????????
#define SSVK_ID_CAN		0xf3	//SSVK		????????K?
#define GSVK_ID_CAN		0xf4	//GSVK		????????K?

#define SIPM_ID_CAN		0x4E	//SIPM		????????
#define GIPM_ID_CAN		0x4F	//GIPM		????????
#define SST_ID_CAN		0x54	//SST		????(??)??
#define GST_ID_CAN		0x55	//GST		????(??)??


#define	CMD_LEN_2	2
#define	CMD_LEN_4	4

#define ERR0 '0' // 成功
#define ERR1 '1' // 数值范围错
#define ERR2 '2' // 无效指令
#define ERR3 '3' // 当前位置不在位置范围内
#define ERR4 '4' // 设定速度超过最大速度 
#define ERR5 '5' // 硬件优先级影响设置不成功

typedef struct 
{   
	union{
		long	cmd_value;
		char	cData[4];				
	}uData;
	union{
		unsigned int   cmd_func;
		char	cData[2];				
	}ufData;	
	int nLen;
	int id;	
}ASCII_CMD, *PASCII_CMD;

typedef union 
{   
	unsigned char	cData[8];
	struct{
		unsigned char len;
		unsigned char addr;
		unsigned short nFunc; 
		union
		{
			unsigned char ucData;
			char cData;
			unsigned short unData; 
			short nData;
			unsigned long ulData; 
			long lData;
		}uData;
	}sData;		
}CAN_CMD, *PCAN_CMD;

/*
typedef union{
	int id;
	unsigned char cData[2];
};
*/
//void Send_ErrCmd(unsigned char err,ASCII_CMD *pCMD);
//void Send_Data(long data,ASCII_CMD *pCMD);
//void send_cmd(ASCII_CMD *pCMD);

void cmd_proc(ASCII_CMD *pCMD);
void can_proc(void);


